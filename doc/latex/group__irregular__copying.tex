\section{Irregular Copying}
\label{group__irregular__copying}\index{Irregular Copying@{Irregular Copying}}
\subsection*{Functions}
\begin{CompactItemize}
\item 
{\footnotesize template$<$typename ForwardIterator, typename InputIterator, typename RandomAccessIterator$>$ }\\void {\bf komrade::gather} (ForwardIterator first, ForwardIterator last, InputIterator map, RandomAccessIterator input)
\item 
{\footnotesize template$<$typename ForwardIterator, typename InputIterator1, typename InputIterator2, typename RandomAccessIterator$>$ }\\void {\bf komrade::gather\_\-if} (ForwardIterator first, ForwardIterator last, InputIterator1 map, InputIterator2 stencil, RandomAccessIterator input)
\item 
{\footnotesize template$<$typename ForwardIterator, typename InputIterator1, typename InputIterator2, typename RandomAccessIterator, typename Predicate$>$ }\\void {\bf komrade::gather\_\-if} (ForwardIterator first, ForwardIterator last, InputIterator1 map, InputIterator2 stencil, RandomAccessIterator input, Predicate pred)
\item 
{\footnotesize template$<$typename InputIterator1, typename InputIterator2, typename RandomAccessIterator$>$ }\\void {\bf komrade::scatter} (InputIterator1 first, InputIterator1 last, InputIterator2 map, RandomAccessIterator output)
\item 
{\footnotesize template$<$typename InputIterator1, typename InputIterator2, typename InputIterator3, typename RandomAccessIterator$>$ }\\void {\bf komrade::scatter\_\-if} (InputIterator1 first, InputIterator1 last, InputIterator2 map, InputIterator3 stencil, RandomAccessIterator output)
\item 
{\footnotesize template$<$typename InputIterator1, typename InputIterator2, typename InputIterator3, typename RandomAccessIterator, typename Predicate$>$ }\\void {\bf komrade::scatter\_\-if} (InputIterator1 first, InputIterator1 last, InputIterator2 map, InputIterator3 stencil, RandomAccessIterator output, Predicate pred)
\end{CompactItemize}


\subsection{Function Documentation}
\index{irregular\_\-copying@{irregular\_\-copying}!gather@{gather}}
\index{gather@{gather}!irregular_copying@{irregular\_\-copying}}
\subsubsection[gather]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename ForwardIterator, typename InputIterator, typename RandomAccessIterator$>$ void komrade::gather (ForwardIterator {\em first}, \/  ForwardIterator {\em last}, \/  InputIterator {\em map}, \/  RandomAccessIterator {\em input})\hspace{0.3cm}{\tt  [inline]}}\label{group__irregular__copying_g025885122ee5c7bbdd5a4df3ec9f83e3}


{\tt gather} copies elements from a source array into a destination range according to a map. For each output iterator {\tt i} in the range [{\tt first}, {\tt last}), the value {\tt input}[$\ast$({\tt map} + ({\tt i} - {\tt first}))] is assigned to {\tt $\ast$i}. {\tt RandomAccessIterator} must permit random access. Gather operations between host and device memory spaces are supported in both directions.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em first}]Beginning of the destination range. \item[{\em last}]End of the destination range. \item[{\em map}]Beginning of the sequence of gather locations. \item[{\em input}]Beginning of the source range.\end{description}
\end{Desc}
\begin{Desc}
\item[Template Parameters:]
\begin{description}
\item[{\em ForwardIterator}]must be a model of {\tt Forward Iterator}. \item[{\em InputIterator}]must be a model of {\tt Input Iterator} and {\tt InputIterator's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt difference\_\-type}. \item[{\em RandomAccessIterator}]must be a model of {\tt Random Access iterator} and {\tt RandomAccessIterator's} {\tt value\_\-type} must be convertible to {\tt ForwardIterator's} {\tt value\_\-type}.\end{description}
\end{Desc}
The following code snippet demonstrates how to use {\tt gather} to reorder a range.



\begin{Code}\begin{verbatim}  #include <komrade/gather.h>
  #include <komrade/device_vector.h>
  ...
  // mark odd indices with a 1; even indices with a 0
  int input[10] = {1, 0, 1, 0, 1, 0, 1, 0, 1, 0};

  // gather all odd indices into the first half of the
  // range, and even indices vice versa
  int map[10]   = {0, 2, 4, 6, 8, 1, 3, 5, 7, 9};

  komrade::device_vector<int> output(10);
  komrade::gather(output.begin(), output.end(),
                  map, input);
  // output is now {0, 0, 0, 0, 0, 1, 1, 1, 1, 1}
\end{verbatim}
\end{Code}



\begin{Desc}
\item[Note:]{\tt gather} is the inverse of \doxyref{komrade::scatter}{p.}{group__irregular__copying_g77c29ea82e990103b71d1126030096c3}. \end{Desc}
\index{irregular\_\-copying@{irregular\_\-copying}!gather\_\-if@{gather\_\-if}}
\index{gather\_\-if@{gather\_\-if}!irregular_copying@{irregular\_\-copying}}
\subsubsection[gather\_\-if]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename ForwardIterator, typename InputIterator1, typename InputIterator2, typename RandomAccessIterator, typename Predicate$>$ void komrade::gather\_\-if (ForwardIterator {\em first}, \/  ForwardIterator {\em last}, \/  InputIterator1 {\em map}, \/  InputIterator2 {\em stencil}, \/  RandomAccessIterator {\em input}, \/  Predicate {\em pred})\hspace{0.3cm}{\tt  [inline]}}\label{group__irregular__copying_g89d498b18db012301db2ceb5a81491a4}


{\tt gather\_\-if} conditionally copies elements from a source array into a destination range according to a map. For each output iterator {\tt i} in the range [{\tt first}, {\tt last}) such that the value of $\ast$({\tt stencil} + ({\tt i} - {\tt first})) is {\tt true}, the value {\tt input[$\ast$(map + (i - first))]} is assigned to $\ast${\tt i}. {\tt RandomAccessIterator} must permit random access.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em first}]Beginning of the destination array. \item[{\em last}]End of the destination array. \item[{\em map}]Beginning of the sequence of gather locations. \item[{\em stencil}]Beginning of the sequence of predicate values. \item[{\em input}]Beginning of the source range. \item[{\em pred}]Predicate to apply to the stencil values.\end{description}
\end{Desc}
\begin{Desc}
\item[Template Parameters:]
\begin{description}
\item[{\em ForwardIterator}]must be a model of {\tt Forward Iterator}. \item[{\em InputIterator1}]must be a model of {\tt Input Iterator} and {\tt InputIterator1's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt difference\_\-type}. \item[{\em InputIterator2}]must be a model of {\tt Input Iterator} and {\tt InputIterator2's} {\tt value\_\-type} must be convertible to {\tt Predicate's} {\tt argument\_\-type}. \item[{\em RandomAccessIterator}]must be a model of {\tt Random Access iterator} and {\tt RandomAccessIterator's} {\tt value\_\-type} must be convertible to {\tt ForwardIterator's} {\tt value\_\-type}. \item[{\em Predicate}]must be a model of {\tt Predicate}.\end{description}
\end{Desc}
\begin{Desc}
\item[Note:]{\tt gather\_\-if} is the inverse of \doxyref{komrade::scatter\_\-if}{p.}{group__irregular__copying_gf2563c22817a3ed7779872f57c27c87c}. \end{Desc}
\index{irregular\_\-copying@{irregular\_\-copying}!gather\_\-if@{gather\_\-if}}
\index{gather\_\-if@{gather\_\-if}!irregular_copying@{irregular\_\-copying}}
\subsubsection[gather\_\-if]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename ForwardIterator, typename InputIterator1, typename InputIterator2, typename RandomAccessIterator$>$ void komrade::gather\_\-if (ForwardIterator {\em first}, \/  ForwardIterator {\em last}, \/  InputIterator1 {\em map}, \/  InputIterator2 {\em stencil}, \/  RandomAccessIterator {\em input})\hspace{0.3cm}{\tt  [inline]}}\label{group__irregular__copying_g420f2ec7e1038e0c8f40730270b22484}


{\tt gather\_\-if} conditionally copies elements from a source array into a destination range according to a map. For each output iterator {\tt i} in the range [{\tt first}, {\tt last}) such that the value of $\ast$({\tt stencil} + ({\tt i} - {\tt first})) is {\tt true}, the value {\tt input}[$\ast$({\tt map} + ({\tt i} - {\tt first}))] is assigned to $\ast${\tt i}. {\tt RandomAccessIterator} must permit random access.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em first}]Beginning of the destination range. \item[{\em last}]End of the destination range. \item[{\em map}]Beginning of the sequence of gather locations. \item[{\em stencil}]Beginning of the sequence of predicate values. \item[{\em input}]Beginning of the source range.\end{description}
\end{Desc}
\begin{Desc}
\item[Template Parameters:]
\begin{description}
\item[{\em ForwardIterator}]must be a model of {\tt Forward Iterator}. \item[{\em InputIterator1}]must be a model of {\tt Input Iterator} and {\tt InputIterator1's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt difference\_\-type}. \item[{\em InputIterator2}]must be a model of {\tt Input Iterator} and {\tt InputIterator2's} {\tt value\_\-type} must be convertible to {\tt bool}. \item[{\em RandomAccessIterator}]must be a model of {\tt Random Access iterator} and {\tt RandomAccessIterator's} {\tt value\_\-type} must be convertible to {\tt ForwardIterator's} {\tt value\_\-type}.\end{description}
\end{Desc}
\begin{Desc}
\item[Note:]{\tt gather\_\-if} is the inverse of \doxyref{komrade::scatter\_\-if}{p.}{group__irregular__copying_gf2563c22817a3ed7779872f57c27c87c}. \end{Desc}
\index{irregular\_\-copying@{irregular\_\-copying}!scatter@{scatter}}
\index{scatter@{scatter}!irregular_copying@{irregular\_\-copying}}
\subsubsection[scatter]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename InputIterator1, typename InputIterator2, typename RandomAccessIterator$>$ void komrade::scatter (InputIterator1 {\em first}, \/  InputIterator1 {\em last}, \/  InputIterator2 {\em map}, \/  RandomAccessIterator {\em output})\hspace{0.3cm}{\tt  [inline]}}\label{group__irregular__copying_g77c29ea82e990103b71d1126030096c3}


{\tt scatter} copies elements from a source range into an output array according to a map. For each iterator {\tt i} in the range [{\tt first}, {\tt last}), the value {\tt $\ast$i} is assigned to {\tt output[$\ast$(map + (i - first))]}. The output iterator must permit random access. If the same index appears more than once in the range {\tt [map, map + (last - first))}, the result is undefined. Scatter operations between host and device memory spaces are supported (in both directions).

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em first}]Beginning of the sequence of values to scatter. \item[{\em last}]End of the sequence of values to scatter. \item[{\em map}]Beginning of the sequence of output indices. \item[{\em output}]Destination of the source elements.\end{description}
\end{Desc}
\begin{Desc}
\item[Template Parameters:]
\begin{description}
\item[{\em InputIterator1}]must be a model of {\tt Input Iterator} and {\tt InputIterator1's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt value\_\-type}. \item[{\em InputIterator2}]must be a model of {\tt Input Iterator} and {\tt InputIterator2's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt difference\_\-type}. \item[{\em RandomAccessIterator}]must be a model of {\tt Random Access iterator}.\end{description}
\end{Desc}
The following code snippet demonstrates how to use {\tt scatter} to reorder a range.



\begin{Code}\begin{verbatim}  #include <komrade/scatter.h>
  #include <komrade/device_vector.h>
  ...
  // mark odd indices with a 1; even indices with a 0
  int input[10] = {1, 0, 1, 0, 1, 0, 1, 0, 1, 0};

  // scatter all odd indices into the first half of the
  // range, and even indices vice versa
  int map[10]   = {0, 5, 1, 6, 2, 7, 3, 8, 4, 9};

  komrade::device_vector<int> output(10);
  komrade::scatter(input, input + 10,
                   map, output.begin());
\end{verbatim}
\end{Code}



\begin{Desc}
\item[Note:]{\tt scatter} is the inverse of \doxyref{komrade::gather}{p.}{group__irregular__copying_g025885122ee5c7bbdd5a4df3ec9f83e3}. \end{Desc}
\index{irregular\_\-copying@{irregular\_\-copying}!scatter\_\-if@{scatter\_\-if}}
\index{scatter\_\-if@{scatter\_\-if}!irregular_copying@{irregular\_\-copying}}
\subsubsection[scatter\_\-if]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename InputIterator1, typename InputIterator2, typename InputIterator3, typename RandomAccessIterator, typename Predicate$>$ void komrade::scatter\_\-if (InputIterator1 {\em first}, \/  InputIterator1 {\em last}, \/  InputIterator2 {\em map}, \/  InputIterator3 {\em stencil}, \/  RandomAccessIterator {\em output}, \/  Predicate {\em pred})\hspace{0.3cm}{\tt  [inline]}}\label{group__irregular__copying_gec8ac2ebe1adf87187e47ff99a04c1b0}


{\tt scatter\_\-if} conditionally copies elements from a source range into an output array according to a map. For each iterator {\tt i} in the range {\tt [first, last)} such that {\tt pred($\ast$(stencil + (i - first)))} is {\tt true}, the value {\tt $\ast$i} is assigned to {\tt output[$\ast$(map + (i - first))]}. The output iterator must permit random access. If the same index appears more than once in the range {\tt [map, map + (last - first))} the result is undefined.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em first}]Beginning of the sequence of values to scatter. \item[{\em last}]End of the sequence of values to scatter. \item[{\em map}]Beginning of the sequence of output indices. \item[{\em stencil}]Beginning of the sequence of predicate values. \item[{\em output}]Beginning of the destination range. \item[{\em pred}]Predicate to apply to the stencil values.\end{description}
\end{Desc}
\begin{Desc}
\item[Template Parameters:]
\begin{description}
\item[{\em InputIterator1}]must be a model of {\tt Input Iterator} and {\tt InputIterator1's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt value\_\-type}. \item[{\em InputIterator2}]must be a model of {\tt Input Iterator} and {\tt InputIterator2's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt difference\_\-type}. \item[{\em InputIterator3}]must be a model of {\tt Input Iterator} and {\tt InputIterator3's} {\tt value\_\-type} must be convertible to {\tt Predicate's} {\tt argument\_\-type}. \item[{\em RandomAccessIterator}]must be a model of {\tt Random Access iterator}. \item[{\em Predicate}]must be a model of {\tt Predicate}.\end{description}
\end{Desc}
\begin{Desc}
\item[Note:]{\tt scatter\_\-if} is the inverse of \doxyref{komrade::gather\_\-if}{p.}{group__irregular__copying_g420f2ec7e1038e0c8f40730270b22484}. \end{Desc}
\index{irregular\_\-copying@{irregular\_\-copying}!scatter\_\-if@{scatter\_\-if}}
\index{scatter\_\-if@{scatter\_\-if}!irregular_copying@{irregular\_\-copying}}
\subsubsection[scatter\_\-if]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename InputIterator1, typename InputIterator2, typename InputIterator3, typename RandomAccessIterator$>$ void komrade::scatter\_\-if (InputIterator1 {\em first}, \/  InputIterator1 {\em last}, \/  InputIterator2 {\em map}, \/  InputIterator3 {\em stencil}, \/  RandomAccessIterator {\em output})\hspace{0.3cm}{\tt  [inline]}}\label{group__irregular__copying_gf2563c22817a3ed7779872f57c27c87c}


{\tt scatter\_\-if} conditionally copies elements from a source range into an output array according to a map. For each iterator {\tt i} in the range {\tt [first, last)} such that {\tt $\ast$(stencil + (i - first))} is true, the value {\tt $\ast$i} is assigned to {\tt output[$\ast$(map + (i - first))]}. The output iterator must permit random access. If the same index appears more than once in the range {\tt [map, map + (last - first))} the result is undefined.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em first}]Beginning of the sequence of values to scatter. \item[{\em last}]End of the sequence of values to scatter. \item[{\em map}]Beginning of the sequence of output indices. \item[{\em stencil}]Beginning of the sequence of predicate values. \item[{\em output}]Beginning of the destination range.\end{description}
\end{Desc}
\begin{Desc}
\item[Template Parameters:]
\begin{description}
\item[{\em InputIterator1}]must be a model of {\tt Input Iterator} and {\tt InputIterator1's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt value\_\-type}. \item[{\em InputIterator2}]must be a model of {\tt Input Iterator} and {\tt InputIterator2's} {\tt value\_\-type} must be convertible to {\tt RandomAccessIterator's} {\tt difference\_\-type}. \item[{\em InputIterator3}]must be a model of {\tt Input Iterator} and {\tt InputIterator3's} {\tt value\_\-type} must be convertible to {\tt bool}. \item[{\em RandomAccessIterator}]must be a model of {\tt Random Access iterator}.\end{description}
\end{Desc}
\begin{Desc}
\item[Note:]{\tt scatter\_\-if} is the inverse of \doxyref{komrade::gather\_\-if}{p.}{group__irregular__copying_g420f2ec7e1038e0c8f40730270b22484}. \end{Desc}
